<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" type="image/jpg" href="/dv logo neon.png">
    <title>Te damos bienvenida Registrate</title>
</head>
<body>
        <div class="neon">BIENVENIDO  DV</div>
<!-- <div class="caja_grande">
    <h1>Empresa DV</h1>
    <p>Ingresa tus datos para formar parte de nuestra familia </p> -->
    <div class="bloque1">
        <br>
        <br>
        <h3>CREAR CUENTA</h3>
        <br>
        <input type="usuario" placeholder="Nombres y Apellidos" id="#">
        <br>
        <br>
        <input type="email" placeholder="Correo" name="" id="email">
        <br>
        <br>
        <input type="password" placeholder="Nueva Contrase침a" id="#" >
        <br>
        <br>
        <input type="password" placeholder=" Confirma Contrase침a" name=""id="pass">
        <br>
        <br>

        <div   class="led">
            <button id="ingresar" class="cc">Crear Cuenta</button>
        </div>
        <br>
        <!-- <button id="ingresar">
        <span></span>
        <span></span>
        <span></span>
            Crear Cuenta </button> -->
        <button id="google" class="google">Registrate con Google</button>
        <br>
        <a href="/indice.html",_self class="boton" >Iniciar Secion</a>
    </div>

    <script type="module">
        // Importe las funciones que necesita desde los SDK que necesita
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-app.js";
        import { GoogleAuthProvider,getAuth, createUserWithEmailAndPassword,signInWithEmailAndPassword,signInWithRedirect,getRedirectResult } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-auth.js";
        //import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-auth.js";
        // TODO: Agrega SDK para los productos de Firebase que quieras usar
        // https://firebase.google.com/docs/web/setup#available-libraries
        // Configuraci칩n de Firebase de tu aplicaci칩n web
        const firebaseConfig = {
            apiKey: "AIzaSyBRq9FO9D2DTam4iPflwn27iurgbM7geWY",
            authDomain: "usuarios-8684f.firebaseapp.com",
            projectId: "usuarios-8684f",
            storageBucket: "usuarios-8684f.appspot.com",
            messagingSenderId: "152552123157",
            appId: "1:152552123157:web:a9dfb148005e2df24c171c"
        };
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        //inicializamos la autenticacion
        const auth = getAuth(app);
        //google
        const provider = new GoogleAuthProvider();
            //creamos el evento click al activar el boton ingresar 
        document.getElementById("ingresar").addEventListener("click",function(){
            //generamos constante para tomar los datos
            const email=document.getElementById("email").value
            const password=document.getElementById("pass").value
            //copio el acceso a estos elementos 
            createUserWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
             // Se craera el usuario en firebase
            const user = userCredential.user;
            // window.open("/bienvenido.html","_self")
            document.write("tu cuenta esta craedo con exito")
              // ...
            })
            .catch((error) => {
                //apareceran errores de llenado
            const errorCode = error.code;
            const errorMessage = error.message;
             // ..
            console.log(errorCode+errorMessage)
            
            });
            
        })
        //creamos un evento con el boton GOOGLE
        document.getElementById("google").addEventListener("click", function(){
            signInWithRedirect(auth, provider);
            getRedirectResult(auth)
            .then((result) => {
                // This gives you a Google Access Token. You can use it to access Google APIs.
                const credential = GoogleAuthProvider.credentialFromResult(result);
                const token = credential.accessToken;

                // The signed-in user info.
                const user = result.user;
                }).catch((error) => {
                // Handle Errors here.
                const errorCode = error.code;
                const errorMessage = error.message;
                // The email of the user's account used.
                const email = error.customData.email;
                // The AuthCredential type that was used.
                const credential = GoogleAuthProvider.credentialFromError(error);
                // ...
            });
        })
    //     //creamos un evento para el boton iniciar 
    //     document.getElementById("iniciar").addEventListener("click",function(){
    //         const email1=document.getElementById("email1").value;
    //         const pass1 = document.getElementById("pass1").value;

    //         signInWithEmailAndPassword(auth, email1, pass1)
    //         .then((userCredential) => {
    //             // Signed in
    //         const user = userCredential.user;
    //         window.open("/bienvenido.html","_self")
    //         //console.log("ya puedes ingresar a la nueva la pagina")

    //             // ...
    //     })
    //     .catch((error) => {
    //         const errorCode = error.code;
    //         const errorMessage = error.message;
    //         console.log("tu cuenta no existe")

    //     });
    // })
    </script>

</body>
</html>
